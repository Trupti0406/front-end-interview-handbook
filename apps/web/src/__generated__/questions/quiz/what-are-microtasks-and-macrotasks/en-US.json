{
  "description": null,
  "format": "quiz",
  "metadata": {
    "author": null,
    "companies": [],
    "created": 1630800000,
    "difficulty": "medium",
    "duration": 5,
    "excerpt": null,
    "featured": false,
    "format": "quiz",
    "frameworkDefault": null,
    "frameworks": [],
    "href": "/questions/quiz/what-are-microtasks-and-macrotasks",
    "importance": "high",
    "languages": [],
    "nextQuestions": [],
    "premium": false,
    "published": true,
    "ranking": 100,
    "similarQuestions": [],
    "slug": "what-are-microtasks-and-macrotasks",
    "subtitle": null,
    "title": "What are microtasks and macrotasks?",
    "topics": [
      "javascript"
    ]
  },
  "solution": "var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),v=(t,e)=>{for(var r in e)o(t,r,{get:e[r],enumerable:!0})},i=(t,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of p(e))!k.call(t,s)&&s!==r&&o(t,s,{get:()=>e[s],enumerable:!(a=u(e,s))||a.enumerable});return t};var y=(t,e,r)=>(r=t!=null?d(m(t)):{},i(e||!t||!t.__esModule?o(r,\"default\",{value:t,enumerable:!0}):r,t)),f=t=>i(o({},\"__esModule\",{value:!0}),t);var l=g((j,c)=>{c.exports=_jsx_runtime});var S={};v(S,{default:()=>M,frontmatter:()=>b});var n=y(l()),b={title:\"What are microtasks and macrotasks?\"};function h(t){let e=Object.assign({h2:\"h2\",p:\"p\",ol:\"ol\",li:\"li\",strong:\"strong\",ul:\"ul\",h3:\"h3\",pre:\"pre\",code:\"code\",hr:\"hr\",a:\"a\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{children:\"TL;DR\"}),`\n`,(0,n.jsx)(e.p,{children:\"In JavaScript, tasks are managed by the event loop and are categorized into:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Macrotasks\"}),\":\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Higher-level events like script execution, user interactions, timers, etc.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Added to the macrotask queue and executed one by one.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.ol,{start:\"2\",children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Microtasks\"}),\":\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Lower-level tasks like promise handlers, mutation observers, etc.\"}),`\n`,(0,n.jsx)(e.li,{children:\"These have higher priority and are executed immediately after the current script but before any macrotask.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{children:\"Event Loop Steps:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Execute the current macrotask.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Process all microtasks.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Render updates (in a browser).\"}),`\n`,(0,n.jsx)(e.li,{children:\"Pick the next macrotask and repeat.\"}),`\n`]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`console.log('start'); // script\nsetTimeout(() => console.log('setTimeout'), 0); // macrotask\nPromise.resolve().then(() => console.log('Promise')); // microtask\nconsole.log('end'); // script\n\n// output\n// start\n// end\n// Promise\n// setTimeout\n`})}),`\n`,(0,n.jsx)(e.hr,{}),`\n`,(0,n.jsx)(e.h2,{children:\"Macrotask and microtask in JavaScript\"}),`\n`,(0,n.jsx)(e.p,{children:\"In JavaScript, microtasks and macrotasks are two types of tasks that are managed by the event loop, which is responsible for executing code, handling events, and managing asynchronous operations\"}),`\n`,(0,n.jsx)(e.h3,{children:\"Macrotasks\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Macrotasks, also known as tasks, include operations that are queued in the event loop's \",(0,n.jsx)(e.code,{children:\"task queue\"}),\". These tasks are generally more substantial and can include:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"setTimeout(callback, delay)\"}),`\n`,(0,n.jsx)(e.li,{children:\"setInterval(callback, delay)\"}),`\n`,(0,n.jsx)(e.li,{children:\"setImmediate(callback) (Node.js only)\"}),`\n`,(0,n.jsx)(e.li,{children:\"I/O operations (e.g., file system operations in Node.js, network requests)\"}),`\n`,(0,n.jsx)(e.li,{children:\"UI rendering and other browser-specific tasks\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"When the event loop processes the macrotask queue, it picks and executes the tasks one by one. After a macrotask completes, the event loop checks the microtask queue first and processes any microtasks before moving on to the next macrotask. So macrotasks have lower priority than microtasks.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`console.log('Script start');\n\nsetTimeout(() => {\n  console.log('setTimeout callback');\n}, 0);\n\nconsole.log('Script end');\n\n// Output:\n// Script start\n// Script end\n// setTimeout callback\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"Microtasks\"}),`\n`,(0,n.jsx)(e.p,{children:\"Microtasks are smaller tasks that are usually executed immediately after the currently executing script and before any macrotask is executed. Microtasks typically include:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Promises (e.g., Promise.then and Promise.catch callbacks)\"}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"MutationObserver\"}),\" callbacks\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"queueMicrotask\"}),\" (callback)\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Microtasks are generally intended for short, quick tasks that need to be executed soon after the current operation completes. They have a higher priority than macrotasks, meaning they are executed before the event loop moves on to the next macrotask.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`console.log('Script start');\n\nPromise.resolve()\n  .then(() => console.log('Promise microtask'))\n  .catch((err) => console.error(err));\n\nconsole.log('Script end');\n\n// Output:\n// Script start\n// Script end\n// Promise microtask\n`})}),`\n`,(0,n.jsx)(e.h3,{children:\"Event Loop Process\"}),`\n`,(0,n.jsx)(e.p,{children:\"The event loop follows this order of execution:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Execute the current macrotask.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Execute all microtasks in the microtask queue.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Render any updates (if applicable).\"}),`\n`,(0,n.jsx)(e.li,{children:\"Move on to the next macrotask.\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This process repeats until there are no more tasks to execute\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"language-js\",children:`console.log('Script start');\n\nsetTimeout(() => console.log('setTimeout'), 0);\n\nqueueMicrotask(() => console.log('queueMicrotask microtask'));\n\nconsole.log('Script end');\n\n// Output:\n// Script start\n// Script end\n// queueMicrotask microtask\n// setTimeout\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"The key difference is that microtasks have a higher priority than macrotasks and are executed immediately after the current macrotask, before rendering or moving on to the next macrotask. This allows for more precise and responsive handling of asynchronous operations, such as promises\"}),`\n`,(0,n.jsx)(e.h2,{children:\"Further reading\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Event_loop\",children:\"The event loop - MDN\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/\",children:\"Tasks, microtasks, queues and schedules\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://dev.to/bymarsel/unraveling-macrotasks-and-microtasks-in-javascript-what-every-developer-should-know-53mc\",children:\"Unraveling Macrotasks and Microtasks in JavaScript: What Every Web Developer Should Know\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://javascript.info/event-loop\",children:\"https://javascript.info/event-loop\"})}),`\n`]})]})}function x(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(h,t)})):h(t)}var M=x;return f(S);})();\n;return Component;"
}