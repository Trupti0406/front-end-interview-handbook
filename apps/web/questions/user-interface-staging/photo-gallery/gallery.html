<style>
  $width: 800px;

  * {
    box-sizing: border-box;
  }

  .background-image {
    background-repeat: no-repeat;
    background-position: center center;
    background-color: #000;
  }

  .gallery {
    margin: 0 auto;
    width: $width;

    .hero {
      background-size: contain;
      height: 600px;
    }

    .thumbnails-container {
      margin-top: 20px;

      .thumbnail {
        $margin: 20px;
        $size: ($width - 4 * $margin)/5;

        background-size: cover;
        border: 10px solid #fff;
        display: inline-block;
        height: $size;
        width: $size;

        &:not(:last-child) {
          margin-right: $margin;
        }

        &.selected {
          border: 10px solid red;
        }
      }
    }
  }
</style>

<script>
  (function () {
    const images = [
      {
        name: 'Image 1',
        thumb: 'http://placehold.it/400x400/f0d/f',
        hero: 'http://placehold.it/800x800/f0d/f',
      },
      {
        name: 'Image 2',
        thumb: 'http://placehold.it/300x350/00d/f',
        hero: 'http://placehold.it/600x700/00d/f',
      },
      {
        name: 'Image 3',
        thumb: 'http://placehold.it/300x200/0df/f',
        hero: 'http://placehold.it/600x400/0df/f',
      },
      {
        name: 'Image 4',
        thumb: 'http://placehold.it/350x300/fd0/f',
        hero: 'http://placehold.it/700x600/fd0/f',
      },
      {
        name: 'Image 5',
        thumb: 'http://placehold.it/200x300/9d0/f',
        hero: 'http://placehold.it/400x600/9d0/f',
      },
    ];

    $.fn.gallery = function (images) {
      let selectedIndex = 0;
      const $galleryContainer = $(this);
      $galleryContainer.addClass('gallery');
      const $hero = $('<div></div>', {
        class: 'hero background-image',
      });

      $galleryContainer.append($hero);

      const $thumbnailsContainer = $('<div></div>', {
        class: 'thumbnails-container',
      });
      images.forEach((image, index) => {
        const $thumb = $('<div>', {
          class: 'thumbnail background-image',
        });
        $thumb.css('background-image', `url(${image.thumb})`);
        $thumb.attr('data-gallery-id', index);
        $thumbnailsContainer.append($thumb);
      });
      $galleryContainer.append($thumbnailsContainer);

      $thumbnailsContainer.on('click', '.thumbnail', (event) => {
        const $thumb = $(event.target);
        const index = parseInt($thumb.data('gallery-id'), 10);
        setHeroImage(index);
      });

      function setHeroImage(index) {
        const imageUrl = images[index].hero;
        $hero.css('background-image', `url(${imageUrl})`);
        const SELECTED_CLASS = 'selected';
        $thumbnailsContainer.children().removeClass(SELECTED_CLASS);
        $($thumbnailsContainer.children()[index]).addClass(SELECTED_CLASS);
      }

      $(document).keydown((event) => {
        const key = event.originalEvent.key;
        switch (key) {
          case 'ArrowLeft':
            selectedIndex--;
            break;
          case 'ArrowRight':
            selectedIndex++;
            break;
          default:
            return;
        }
        event.preventDefault();
        selectedIndex = (selectedIndex + images.length) % images.length;
        setHeroImage(selectedIndex);
      });

      setHeroImage(selectedIndex);
    };

    $('#my-gallery').gallery(images);
  })();
</script>
